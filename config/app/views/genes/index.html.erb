<style>
    .ui-autocomplete {
        max-height: 300px;
        overflow-y: auto;
        /* prevent horizontal scrollbar */
        overflow-x: hidden;
    }
        /* IE 6 doesn't support max-height
        * we use height instead, but this forces the menu to always be this tall
        */
    * html .ui-autocomplete {
        height: 200px;
    }

  .ui-combobox {
        position: relative;
        display: inline-block;
    }
    .ui-combobox-toggle {
        position: absolute;
        top: 0;
        bottom: 0;
        margin-left: -1px;
        padding: 0;
        /* support: IE7 */
        *height: 1.7em;
        *top: 0.1em;
    }
    .ui-combobox-input {
        margin: 0;
        padding: 0.3em;
    }
</style>
<script>

    var previousValue = "";

    $(document).ready( function () {

         var g= <%=@genes_json.to_json.html_safe%>;

        $("#search_string").autocomplete({
            source: function( request, response ) {
                var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
                response( $.grep( g, function( item ){
                    return matcher.test( item );
                }))},

            minLength: 0,
            autoFocus: true,
            autoFill: true,
            mustMatch: true,
            matchContains: "word"
        }).keyup(function() {
                    var isValid = false;
                    for (i in g) {
                        if (g[i].toUpperCase().match(this.value.toUpperCase())) {
                            isValid = true;
                        }
                    }
                    if (!isValid) {
                        this.value = previousValue
                    } else {
                        previousValue = this.value;
                    }
                });
    });
</script>

<p></p>
<%=form_tag({:controller => "genes",:action => "search"}, :method =>"get") do%>
    <div class="ui-widget">
    <%= text_field_tag(:search_string)%>
    <%= submit_tag("Search", :id=>"search_but")%></div>
   <div> <%if @gene%>
    <p style="float:left"><h2>Gene Data</h2> </p>
    <%= render :partial => "gene", :locals=>{:gene=>@gene}%>
    <%end%></div>
   <div> <%if @network%>
         <p> </p>
        <%= render :partial => "network", :locals=>{:network=>@network}%>
    <%end%></div>
   <%if @th_ori && @th_rep && @treg_ori && @treg_rep%>
        <%= render :partial => "treg", :locals=>{:th_ori=>@th_ori, :th_rep=>@th_rep, :treg_ori=>@treg_ori, :treg_rep=>@treg_rep}%>
    <%end%>

<%end%>


